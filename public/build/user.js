(self["webpackChunkcelsius3"] = self["webpackChunkcelsius3"] || []).push([["user"],{

/***/ "./assets/ng/User/app.js":
/*!*******************************!*\
  !*** ./assets/ng/User/app.js ***!
  \*******************************/
/***/ (() => {

var userApp = angular.module('userApp', ['ngRoute', 'ngResource', 'ngAnimate', 'userControllers', 'userFilters', 'angular-loading-bar', 'pascalprecht.translate', 'ui.bootstrap', 'boxuk.translation']);
userApp.config(['$routeProvider', '$translateProvider', function ($routeProvider, $translateProvider) {
  $routeProvider.when('/', {
    templateUrl: 'index.html?' + assets_version_user
  }).otherwise({
    redirectTo: '/'
  });
  $translateProvider.useStaticFilesLoader({
    prefix: '/bundles/celsius3core/ng/locales/locale-',
    suffix: '.json'
  });
  $translateProvider.preferredLanguage(_locale);
  $translateProvider.useSanitizeValueStrategy('escaped');
}]);

/***/ }),

/***/ "./assets/ng/User/controllers.js":
/*!***************************************!*\
  !*** ./assets/ng/User/controllers.js ***!
  \***************************************/
/***/ (() => {

var userControllers = angular.module('userControllers', []);
userControllers.controller('UserCtrl', ['$scope', '$http', 'Order', 'Message', 'User', function ($scope, $http, Order, Message, User) {
  'use strict';

  $scope.assets_version = assets_version_user;
  $scope.sortData = {
    sort: 'o.createdAt',
    direction: 'desc'
  };
  $http.get(Routing.generate('user_rest_order_count_get')).then(function (response) {
    $scope.orderCount = response.data;
    $scope.loadOrders();
  }, function (response) {
    generateCelsiusAlert(response);
  });
  $scope.pagination = {
    currentPage: 1,
    resultsPerPage: resultsPerPage
  };
  $scope.loadOrders = function () {
    Order.query({
      state: 'created,searched,requested,approval_pending,received',
      withRequest: true,
      page: $scope.pagination.currentPage,
      sort: $scope.sortData.sort,
      direction: $scope.sortData.direction
    }, function (response) {
      $scope.orders = response.orders;
      $scope.total = $scope.orderCount.created + $scope.orderCount.searched + $scope.orderCount.requested + $scope.orderCount.approval_pending + $scope.orderCount.received;
      $scope.numPages = Math.ceil($scope.total / 10);
      $scope.orders.forEach(function (order) {
        order.request = response.requests[order.id];
      });
    });
  };
  $scope.pageChanged = function () {
    $scope.loadOrders();
  };
  $scope.sort = function (field) {
    if ($scope.sortData.sort === field) {
      $scope.sortData.direction = $scope.sortData.direction === 'asc' ? 'desc' : 'asc';
    } else {
      $scope.sortData.sort = field;
      $scope.sortData.direction = 'asc';
    }
    $scope.loadOrders();
  };
  Message.query({
    sort: 'm.lastMessageDate',
    direction: 'desc',
    count: 3
  }, function (response) {
    $scope.threads = response;
  });
  $scope.user = User.get({
    id: user_id
  });
  $scope.getFileDownloadRoute = function (request, file) {
    return Routing.generate('user_file_download', {
      request: request.id,
      file: file.id
    });
  };
  $scope.hasDownloadableFiles = function (e) {
    return !e.downloaded || e.has_download_time;
  };
  $scope.user_role = user_role;
}]);

/***/ }),

/***/ "./assets/ng/User/filters.js":
/*!***********************************!*\
  !*** ./assets/ng/User/filters.js ***!
  \***********************************/
/***/ (() => {

var userFilters = angular.module('userFilters', []);
userFilters.filter('get_url', function () {
  return function (input) {
    return Routing.generate(input.path, input.params);
  };
});
userFilters.filter('request_type', function () {
  return function (type) {
    return type === 'search' ? 'busqueda' : 'provision';
  };
});
userFilters.filter('request_type_abbr', function () {
  return function (type) {
    return type === 'search' ? 's' : 'p';
  };
});

/***/ }),

/***/ "./assets/ng/User/resources.js":
/*!*************************************!*\
  !*** ./assets/ng/User/resources.js ***!
  \*************************************/
/***/ (() => {

var userApp = angular.module('userApp');
userApp.factory('Order', ['$resource', function ($resource) {
  return $resource(Routing.generate('user_rest_order') + ':id', {
    id: '@id'
  }, {
    query: {
      isArray: false
    }
  });
}]);
userApp.factory('User', ['$resource', function ($resource) {
  return $resource(Routing.generate('user_rest_user') + '/:id', {
    id: '@id'
  });
}]);
userApp.factory('Message', ['$resource', function ($resource) {
  return $resource(Routing.generate('rest_message') + ':id', {
    id: '@id'
  });
}]);

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ var __webpack_exports__ = (__webpack_exec__("./assets/ng/User/app.js"), __webpack_exec__("./assets/ng/User/resources.js"), __webpack_exec__("./assets/ng/User/controllers.js"), __webpack_exec__("./assets/ng/User/filters.js"));
/******/ }
]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUU7SUFDbkIsT0FBT0EsSUFBSSxLQUFLLFFBQVEsR0FBRyxHQUFHLEdBQUcsR0FBRztFQUN4QyxDQUFDO0FBQ0wsQ0FBQyxDQUFDOzs7Ozs7Ozs7O0FDbEJGLElBQUk3RSxPQUFPLEdBQUdDLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDLFNBQVMsQ0FBQztBQUV2Q0YsT0FBTyxDQUFDOEUsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDLFdBQVcsRUFBRSxVQUFVQyxTQUFTLEVBQUU7RUFDeEQsT0FBT0EsU0FBUyxDQUFDbEQsT0FBTyxDQUFDQyxRQUFRLENBQUMsaUJBQWlCLENBQUMsR0FBRyxLQUFLLEVBQ3hEO0lBQUM0QixFQUFFLEVBQUU7RUFBSyxDQUFDLEVBQUU7SUFDVGxCLEtBQUssRUFBRTtNQUFDd0MsT0FBTyxFQUFFO0lBQUs7RUFDMUIsQ0FBQyxDQUFDO0FBQ1YsQ0FBQyxDQUFDLENBQUM7QUFFSGhGLE9BQU8sQ0FBQzhFLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxXQUFXLEVBQUUsVUFBVUMsU0FBUyxFQUFFO0VBQ3ZELE9BQU9BLFNBQVMsQ0FBQ2xELE9BQU8sQ0FBQ0MsUUFBUSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsTUFBTSxFQUN4RDtJQUFDNEIsRUFBRSxFQUFFO0VBQUssQ0FBQyxDQUFDO0FBQ3BCLENBQUMsQ0FBQyxDQUFDO0FBRUgxRCxPQUFPLENBQUM4RSxPQUFPLENBQUMsU0FBUyxFQUFFLENBQUMsV0FBVyxFQUFFLFVBQVVDLFNBQVMsRUFBRTtFQUMxRCxPQUFPQSxTQUFTLENBQUNsRCxPQUFPLENBQUNDLFFBQVEsQ0FBQyxjQUFjLENBQUMsR0FBRyxLQUFLLEVBQ3JEO0lBQUM0QixFQUFFLEVBQUU7RUFBSyxDQUFDLENBQUM7QUFDcEIsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jZWxzaXVzMy8uL2Fzc2V0cy9uZy9Vc2VyL2FwcC5qcyIsIndlYnBhY2s6Ly9jZWxzaXVzMy8uL2Fzc2V0cy9uZy9Vc2VyL2NvbnRyb2xsZXJzLmpzIiwid2VicGFjazovL2NlbHNpdXMzLy4vYXNzZXRzL25nL1VzZXIvZmlsdGVycy5qcyIsIndlYnBhY2s6Ly9jZWxzaXVzMy8uL2Fzc2V0cy9uZy9Vc2VyL3Jlc291cmNlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgdXNlckFwcCA9IGFuZ3VsYXIubW9kdWxlKCd1c2VyQXBwJywgW1xuICAgICduZ1JvdXRlJyxcbiAgICAnbmdSZXNvdXJjZScsXG4gICAgJ25nQW5pbWF0ZScsXG4gICAgJ3VzZXJDb250cm9sbGVycycsXG4gICAgJ3VzZXJGaWx0ZXJzJyxcbiAgICAnYW5ndWxhci1sb2FkaW5nLWJhcicsXG4gICAgJ3Bhc2NhbHByZWNodC50cmFuc2xhdGUnLFxuICAgICd1aS5ib290c3RyYXAnLFxuICAgICdib3h1ay50cmFuc2xhdGlvbidcbl0pO1xuXG51c2VyQXBwLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJywgJyR0cmFuc2xhdGVQcm92aWRlcicsXG4gICAgZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyLCAkdHJhbnNsYXRlUHJvdmlkZXIpIHtcbiAgICAgICAgJHJvdXRlUHJvdmlkZXIuXG4gICAgICAgICAgICAgICAgd2hlbignLycsIHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdpbmRleC5odG1sPycgKyBhc3NldHNfdmVyc2lvbl91c2VyXG4gICAgICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICAgICAgb3RoZXJ3aXNlKHtcbiAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3RUbzogJy8nXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgJHRyYW5zbGF0ZVByb3ZpZGVyLnVzZVN0YXRpY0ZpbGVzTG9hZGVyKHtcbiAgICAgICAgICAgIHByZWZpeDogJy9idW5kbGVzL2NlbHNpdXMzY29yZS9uZy9sb2NhbGVzL2xvY2FsZS0nLFxuICAgICAgICAgICAgc3VmZml4OiAnLmpzb24nXG4gICAgICAgIH0pO1xuICAgICAgICAkdHJhbnNsYXRlUHJvdmlkZXIucHJlZmVycmVkTGFuZ3VhZ2UoX2xvY2FsZSk7XG4gICAgICAgICR0cmFuc2xhdGVQcm92aWRlci51c2VTYW5pdGl6ZVZhbHVlU3RyYXRlZ3koJ2VzY2FwZWQnKTtcbiAgICB9XSk7XG4iLCJ2YXIgdXNlckNvbnRyb2xsZXJzID0gYW5ndWxhci5tb2R1bGUoJ3VzZXJDb250cm9sbGVycycsIFtdKTtcblxudXNlckNvbnRyb2xsZXJzLmNvbnRyb2xsZXIoJ1VzZXJDdHJsJywgWyckc2NvcGUnLCAnJGh0dHAnLCAnT3JkZXInLCAnTWVzc2FnZScsICdVc2VyJyxcbiAgICBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgT3JkZXIsIE1lc3NhZ2UsIFVzZXIpIHtcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgICAgICRzY29wZS5hc3NldHNfdmVyc2lvbiA9IGFzc2V0c192ZXJzaW9uX3VzZXI7XG5cbiAgICAgICAgJHNjb3BlLnNvcnREYXRhID0ge1xuICAgICAgICAgICAgc29ydDogJ28uY3JlYXRlZEF0JyxcbiAgICAgICAgICAgIGRpcmVjdGlvbjogJ2Rlc2MnXG4gICAgICAgIH07XG5cbiAgICAgICAgJGh0dHAuZ2V0KFJvdXRpbmcuZ2VuZXJhdGUoJ3VzZXJfcmVzdF9vcmRlcl9jb3VudF9nZXQnKSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5vcmRlckNvdW50ID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZE9yZGVycygpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVDZWxzaXVzQWxlcnQocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLnBhZ2luYXRpb24gPSB7XG4gICAgICAgICAgICBjdXJyZW50UGFnZTogMSxcbiAgICAgICAgICAgIHJlc3VsdHNQZXJQYWdlOiByZXN1bHRzUGVyUGFnZVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5sb2FkT3JkZXJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgT3JkZXIucXVlcnkoe1xuICAgICAgICAgICAgICAgIHN0YXRlOiAnY3JlYXRlZCxzZWFyY2hlZCxyZXF1ZXN0ZWQsYXBwcm92YWxfcGVuZGluZyxyZWNlaXZlZCcsXG4gICAgICAgICAgICAgICAgd2l0aFJlcXVlc3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgcGFnZTogJHNjb3BlLnBhZ2luYXRpb24uY3VycmVudFBhZ2UsXG4gICAgICAgICAgICAgICAgc29ydDogJHNjb3BlLnNvcnREYXRhLnNvcnQsXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiAkc2NvcGUuc29ydERhdGEuZGlyZWN0aW9uXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzID0gcmVzcG9uc2Uub3JkZXJzO1xuICAgICAgICAgICAgICAgICRzY29wZS50b3RhbCA9ICRzY29wZS5vcmRlckNvdW50LmNyZWF0ZWQgKyAkc2NvcGUub3JkZXJDb3VudC5zZWFyY2hlZCArICRzY29wZS5vcmRlckNvdW50LnJlcXVlc3RlZCArICRzY29wZS5vcmRlckNvdW50LmFwcHJvdmFsX3BlbmRpbmcgKyAkc2NvcGUub3JkZXJDb3VudC5yZWNlaXZlZDtcblxuICAgICAgICAgICAgICAgICRzY29wZS5udW1QYWdlcyA9IE1hdGguY2VpbCgkc2NvcGUudG90YWwgLyAxMCk7XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzLmZvckVhY2goZnVuY3Rpb24gKG9yZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIG9yZGVyLnJlcXVlc3QgPSByZXNwb25zZS5yZXF1ZXN0c1tvcmRlci5pZF07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUucGFnZUNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUubG9hZE9yZGVycygpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zb3J0ID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLnNvcnREYXRhLnNvcnQgPT09IGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNvcnREYXRhLmRpcmVjdGlvbiA9ICRzY29wZS5zb3J0RGF0YS5kaXJlY3Rpb24gPT09ICdhc2MnID8gJ2Rlc2MnIDogJ2FzYyc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRzY29wZS5zb3J0RGF0YS5zb3J0ID0gZmllbGQ7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNvcnREYXRhLmRpcmVjdGlvbiA9ICdhc2MnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUubG9hZE9yZGVycygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIE1lc3NhZ2UucXVlcnkoe3NvcnQ6ICdtLmxhc3RNZXNzYWdlRGF0ZScsIGRpcmVjdGlvbjogJ2Rlc2MnLCBjb3VudDogM30sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgJHNjb3BlLnRocmVhZHMgPSByZXNwb25zZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLnVzZXIgPSBVc2VyLmdldCh7aWQ6IHVzZXJfaWR9KTtcblxuICAgICAgICAkc2NvcGUuZ2V0RmlsZURvd25sb2FkUm91dGUgPSBmdW5jdGlvbiAocmVxdWVzdCwgZmlsZSkge1xuICAgICAgICAgICAgcmV0dXJuIFJvdXRpbmcuZ2VuZXJhdGUoJ3VzZXJfZmlsZV9kb3dubG9hZCcsIHtyZXF1ZXN0OiByZXF1ZXN0LmlkLCBmaWxlOiBmaWxlLmlkfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmhhc0Rvd25sb2FkYWJsZUZpbGVzID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiAoIWUuZG93bmxvYWRlZCB8fCBlLmhhc19kb3dubG9hZF90aW1lKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUudXNlcl9yb2xlID0gdXNlcl9yb2xlO1xuICAgIH1dKTtcbiIsInZhciB1c2VyRmlsdGVycyA9IGFuZ3VsYXIubW9kdWxlKCd1c2VyRmlsdGVycycsIFtdKTtcblxudXNlckZpbHRlcnMuZmlsdGVyKCdnZXRfdXJsJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIFJvdXRpbmcuZ2VuZXJhdGUoaW5wdXQucGF0aCwgaW5wdXQucGFyYW1zKTtcbiAgICB9O1xufSk7XG5cbnVzZXJGaWx0ZXJzLmZpbHRlcigncmVxdWVzdF90eXBlJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICByZXR1cm4gdHlwZSA9PT0gJ3NlYXJjaCcgPyAnYnVzcXVlZGEnIDogJ3Byb3Zpc2lvbic7XG4gICAgfTtcbn0pO1xuXG51c2VyRmlsdGVycy5maWx0ZXIoJ3JlcXVlc3RfdHlwZV9hYmJyJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICByZXR1cm4gdHlwZSA9PT0gJ3NlYXJjaCcgPyAncycgOiAncCc7XG4gICAgfTtcbn0pOyIsInZhciB1c2VyQXBwID0gYW5ndWxhci5tb2R1bGUoJ3VzZXJBcHAnKTtcblxudXNlckFwcC5mYWN0b3J5KCdPcmRlcicsIFsnJHJlc291cmNlJywgZnVuY3Rpb24gKCRyZXNvdXJjZSkge1xuICAgIHJldHVybiAkcmVzb3VyY2UoUm91dGluZy5nZW5lcmF0ZSgndXNlcl9yZXN0X29yZGVyJykgKyAnOmlkJyxcbiAgICAgICAge2lkOiAnQGlkJ30sIHtcbiAgICAgICAgICAgIHF1ZXJ5OiB7aXNBcnJheTogZmFsc2V9XG4gICAgICAgIH0pO1xufV0pO1xuXG51c2VyQXBwLmZhY3RvcnkoJ1VzZXInLCBbJyRyZXNvdXJjZScsIGZ1bmN0aW9uICgkcmVzb3VyY2UpIHtcbiAgICByZXR1cm4gJHJlc291cmNlKFJvdXRpbmcuZ2VuZXJhdGUoJ3VzZXJfcmVzdF91c2VyJykgKyAnLzppZCcsXG4gICAgICAgIHtpZDogJ0BpZCd9KTtcbn1dKTtcblxudXNlckFwcC5mYWN0b3J5KCdNZXNzYWdlJywgWyckcmVzb3VyY2UnLCBmdW5jdGlvbiAoJHJlc291cmNlKSB7XG4gICAgcmV0dXJuICRyZXNvdXJjZShSb3V0aW5nLmdlbmVyYXRlKCdyZXN0X21lc3NhZ2UnKSArICc6aWQnLFxuICAgICAgICB7aWQ6ICdAaWQnfSk7XG59XSk7Il0sIm5hbWVzIjpbInVzZXJBcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCIkdHJhbnNsYXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJhc3NldHNfdmVyc2lvbl91c2VyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsInVzZVN0YXRpY0ZpbGVzTG9hZGVyIiwicHJlZml4Iiwic3VmZml4IiwicHJlZmVycmVkTGFuZ3VhZ2UiLCJfbG9jYWxlIiwidXNlU2FuaXRpemVWYWx1ZVN0cmF0ZWd5IiwidXNlckNvbnRyb2xsZXJzIiwiY29udHJvbGxlciIsIiRzY29wZSIsIiRodHRwIiwiT3JkZXIiLCJNZXNzYWdlIiwiVXNlciIsImFzc2V0c192ZXJzaW9uIiwic29ydERhdGEiLCJzb3J0IiwiZGlyZWN0aW9uIiwiZ2V0IiwiUm91dGluZyIsImdlbmVyYXRlIiwidGhlbiIsInJlc3BvbnNlIiwib3JkZXJDb3VudCIsImRhdGEiLCJsb2FkT3JkZXJzIiwiZ2VuZXJhdGVDZWxzaXVzQWxlcnQiLCJwYWdpbmF0aW9uIiwiY3VycmVudFBhZ2UiLCJyZXN1bHRzUGVyUGFnZSIsInF1ZXJ5Iiwic3RhdGUiLCJ3aXRoUmVxdWVzdCIsInBhZ2UiLCJvcmRlcnMiLCJ0b3RhbCIsImNyZWF0ZWQiLCJzZWFyY2hlZCIsInJlcXVlc3RlZCIsImFwcHJvdmFsX3BlbmRpbmciLCJyZWNlaXZlZCIsIm51bVBhZ2VzIiwiTWF0aCIsImNlaWwiLCJmb3JFYWNoIiwib3JkZXIiLCJyZXF1ZXN0IiwicmVxdWVzdHMiLCJpZCIsInBhZ2VDaGFuZ2VkIiwiZmllbGQiLCJjb3VudCIsInRocmVhZHMiLCJ1c2VyIiwidXNlcl9pZCIsImdldEZpbGVEb3dubG9hZFJvdXRlIiwiZmlsZSIsImhhc0Rvd25sb2FkYWJsZUZpbGVzIiwiZSIsImRvd25sb2FkZWQiLCJoYXNfZG93bmxvYWRfdGltZSIsInVzZXJfcm9sZSIsInVzZXJGaWx0ZXJzIiwiZmlsdGVyIiwiaW5wdXQiLCJwYXRoIiwicGFyYW1zIiwidHlwZSIsImZhY3RvcnkiLCIkcmVzb3VyY2UiLCJpc0FycmF5Il0sInNvdXJjZVJvb3QiOiIifQ==
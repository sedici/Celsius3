{#<section class="content">#}

    {#<!-- Main content -->#}

    {#<div class="navigation">#}
        {#{{ knp_pagination_render(threads) }}#}
    {#</div>#}
    {#<!-- /.col -->#}
    {#<div class="col-md-12">#}

        {#<div class="sorting-group pull-right">#}
            {#<span>#}
                {#{{ 'Sort by'|trans }}:#}
            {#</span>#}
            {#<ul class="list-unstyled">#}
                {#<li>{{ knp_pagination_sortable(threads, 'Date'|trans, 't.created_at') }}#}
                    {#-#}
                {#</li>#}
                {#<li>{{ knp_pagination_sortable(threads, 'Subject'|trans, 't.subject') }}</li>#}
            {#</ul>#}
            {#|#}
            {#<button type="submit" class="btn btn-default btn-sm" title="{{ 'button.mark_read' | trans }}" data-toggle="">#}
                {#<span class="glyphicon glyphicon-ok"></span>#}
            {#</button>#}
        {#</div>#}

        {#<br/>#}
        {#<br/>#}
        {#<div class="box box-primary">#}
            {#<div class="box-header with-border">#}
                {#<h3 class="box-title">Inbox</h3>#}

                {#<div class="box-tools pull-right">#}
                    {#<div class="has-feedback">#}
                        {#<input type="text" class="form-control input-sm" placeholder="Search Mail">#}
                        {#<span class="glyphicon glyphicon-search form-control-feedback"></span>#}
                    {#</div>#}
                {#</div>#}
                {#<!-- /.box-tools -->#}
            {#</div>#}
            {#<!-- /.box-header -->#}
            {#<div class="box-body no-padding">#}
                {#<div class="mailbox-controls">#}
                    {#<!-- Check all button -->#}
                    {#<button type="button" class="btn btn-default btn-sm checkbox-toggle">#}
                        {#<i class="fa fa-square-o"></i>#}
                    {#</button>#}
                    {#<div class="btn-group">#}
                        {#<button type="button" class="btn btn-default btn-sm">#}
                            {#<i class="fa fa-trash-o"></i>#}
                        {#</button>#}
                        {#<!--<button type="button" class="btn btn-default btn-sm"><i class="fa fa-reply"></i></button>#}
            {#<button type="button" class="btn btn-default btn-sm"><i class="fa fa-share"></i></button>-->#}
                    {#</div>#}
                    {#<!-- /.btn-group -->#}
                    {#<!--<button type="button" class="btn btn-default btn-sm"><i class="fa fa-refresh"></i></button>-->#}

                    {#<!-- /.pull-right -->#}
                {#</div>#}
                {#<form action="{{ path('fos_message_mark_read') }}" method="POST">#}
                    {#<div class="table-responsive mailbox-messages">#}
                        {#<table class="table table-hover table-striped">#}
                            {#<tbody>#}
                                {#{% for thread in threads %}#}

                                    {#<tr class="message-heading {{ fos_message_is_read(thread)?'message-read':'' }}" id="id{{ thread.id }}">#}
                                        {#<td>#}
                                            {#<input type="checkbox" name="threads[]" value="{{ thread.id }}"/></td>#}
                                        {# <td class="mailbox-star"><a href="#"><i class="fa fa-star text-yellow"></i></a></td>#}
                                        {#<td class="mailbox-name">#}
                                            {#<a href="{{ url('fos_message_thread_view', {'threadId': thread.id}) }}">#}
                                                {#{{  thread.lastMessage.sender.fullName | slice(0, 20) }}</a>#}
                                        {#</td>#}
                                        {#<td class="mailbox-subject">#}
                                            {#({{ get_unread_messages(thread) }})#}
                                            {#{{ thread.subject }}#}
                                        {#</td>#}
                                        {#<td class="mailbox-attachment"></td>#}
                                        {#<td class="mailbox-date">{{  thread.lastMessage.created_at|localizeddate }}</td>#}
                                    {#</tr>#}
                                {#{% else %}#}
                                    {#{% trans from 'FOSMessageBundle' %}no_thread{% endtrans %}.#}
                                {#{% endfor %}#}

                            {#</tbody>#}
                        {#</table>#}
                        {#<!-- /.table -->#}
                    {#</div>#}
                    {#<!-- /.mail-box-messages -->#}
                    {#<div class="box-footer no-padding">#}
                        {#<div class="mailbox-controls">#}
                            {#<!-- Check all button -->#}
                            {#<button type="button" class="btn btn-default btn-sm checkbox-toggle">#}
                                {#<i class="fa fa-square-o"></i>#}
                            {#</button>#}
                            {#<div class="btn-group">#}
                                {#<button type="button" class="btn btn-default btn-sm">#}
                                    {#<i class="fa fa-trash-o"></i>#}
                                {#</button>#}
                                {#<!-- <button type="button" class="btn btn-default btn-sm"><i class="fa fa-reply"></i></button>#}
                     {#<button type="button" class="btn btn-default btn-sm"><i class="fa fa-share"></i></button>-->#}
                            {#</div>#}
                            {#<!-- /.btn-group -->#}
                            {#<!--<button type="button" class="btn btn-default btn-sm"><i class="fa fa-refresh"></i></button>-->#}

                        {#</div>#}
                    {#</div>#}
                    {#<!-- /.box-body -->#}
                {#</div>#}
                {#<!-- /. box -->#}
            {#</div>#}
            {#<!-- /.col -->#}

            {#<!-- /.row -->#}
        {#</form>#}
        {#<div class="navigation">#}
            {#{{ knp_pagination_render(threads) }}#}
        {#</div>#}

        {#<!-- /.content -->#}

        {#<!-- /.control-sidebar -->#}
        {#<!-- Add the sidebar's background. This div must be placed#}
     {#immediately after the control sidebar -->#}
        {#<div class="control-sidebar-bg"></div>#}
    {#</div>#}
    {#<!-- ./wrapper -->#}

    {#<!-- iCheck -->#}
    {#<script>#}
        {#$(function() {#}
            {#//Enable iCheck plugin for checkboxes iCheck for checkbox and radio inputs#}
            {#$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass: 'icheckbox_flat-blue', radioClass: 'iradio_flat-blue'});#}

            {#//Enable check and uncheck all functionality#}
            {#$(".checkbox-toggle").click(function() {#}
                {#var clicks = $(this).data('clicks');#}
                {#if (clicks) {#}
                    {#//Uncheck all checkboxes#}
                    {#$(".mailbox-messages input[type='checkbox']").iCheck("uncheck");#}
                    {#$(".fa", this).removeClass("fa-check-square-o").addClass('fa-square-o');#}
                {#} else {#}
                    {#//Check all checkboxes#}
                    {#$(".mailbox-messages input[type='checkbox']").iCheck("check");#}
                    {#$(".fa", this).removeClass("fa-square-o").addClass('fa-check-square-o');#}
                {#}#}
                {#$(this).data("clicks", !clicks);#}
            {#});#}

            {#//Handle starring for glyphicon and font awesome#}
            {#$(".mailbox-star").click(function(e) {#}
                {#e.preventDefault();#}
                {#//detect type#}
                {#var $this = $(this).find("a > i");#}
                {#var glyph = $this.hasClass("glyphicon");#}
                {#var fa = $this.hasClass("fa");#}

                {#//Switch states#}
                {#if (glyph) {#}
                    {#$this.toggleClass("glyphicon-star");#}
                    {#$this.toggleClass("glyphicon-star-empty");#}
                {#}#}

                {#if (fa) {#}
                    {#$this.toggleClass("fa-star");#}
                    {#$this.toggleClass("fa-star-o");#}
                {#}#}
            {#});#}
        {#});#}
    {#</script>#}

{#</section>#}

<div class="navigation">
    {{ knp_pagination_render(threads) }}
</div>
<form action="{{ path('fos_message_mark_read') }}" method="POST">
    <div class="sorting-group pull-right">
        <span>
            {{ 'Sort by'|trans }}:
        </span>
        <ul class="list-unstyled">
            <li>{{ knp_pagination_sortable(threads, 'Date'|trans, 't.created_at') }} -</li>
            <li>{{ knp_pagination_sortable(threads, 'Subject'|trans, 't.subject') }}</li>
        </ul>
        |
        <button type="submit" class="btn btn-default btn-sm" title="{{ 'button.mark_read' | trans }}" data-toggle="">
            <span class="glyphicon glyphicon-ok"></span>
        </button>
    </div>
    <div class="clearfix"></div>

    <div class="list-group">
        {% for thread in threads %}
            <div id="id{{ thread.id }}"
                 class="list-group-item row {{ fos_message_is_read(thread)?'message-read':'text-bold' }}">
                <span class="col-md-1">
                    <input type="checkbox" name="threads[]" value="{{ thread.id }}" style="margin: 0px;"/>
                </span>
                <a href="{{ url('fos_message_thread_view', {'threadId': thread.id}) }}">
                    <span class="badge col-md-2">
                        {{ thread.lastMessage.sender.fullName | slice(0, 20) }}
                    </span>
                    <span class="message-subject col-md-6 autoellipsis">
                        ({{ get_unread_messages(thread) }}) {{ thread.subject }}
                    </span>
                    <span class="col-md-3">
                        {{ thread.lastMessage.created_at|localizeddate }}
                    </span>
                    <span class="clearfix"></span>
                </a>
            </div>
        {% else %}
            {% trans from 'FOSMessageBundle' %}no_thread{% endtrans %}.
        {% endfor %}
    </div>
</form>
<div class="navigation">
    {{ knp_pagination_render(threads) }}
</div>